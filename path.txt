ğŸ“‚ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¿ÑƒÑ‚ÑĞ¼Ğ¸ Ğ² Terraform

Terraform Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿ÑƒÑ‚ÑĞ¼Ğ¸:
ğŸ”¹ path.module

Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ğº Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼Ñƒ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ.

locals {
  cloudinit_path = "${path.module}/templates/init.yaml"
}

ğŸ“Œ Ğ§Ğ°ÑÑ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ğ¼Ğ¾Ğ´ÑƒĞ»ÑÑ… Ğ´Ğ»Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² Ğ¸ ĞºĞ»ÑÑ‡ĞµĞ¹.
ğŸ”¹ path.root

Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ğº ĞºĞ¾Ñ€Ğ½ĞµĞ²Ğ¾Ğ¼Ñƒ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ñƒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ (Ğ³Ğ´Ğµ Ğ±Ñ‹Ğ» Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ terraform apply).

output "root_path" {
  value = path.root
}

ğŸ“Œ Ğ£Ğ´Ğ¾Ğ±Ğ½Ğ¾, ĞºĞ¾Ğ³Ğ´Ğ° Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ñ‰Ğ°Ñ‚ÑŒÑÑ Ğº Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼ Ğ²Ğ½Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ.
ğŸ”¹ path.cwd

Ğ Ğ°Ğ±Ğ¾Ñ‡Ğ°Ñ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°Ñ‚ÑŒÑÑ Ğ¾Ñ‚ path.root Ğ² CI/CD Ğ¸Ğ»Ğ¸ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°Ñ…).

output "cwd_path" {
  value = path.cwd
}

ğŸ“Œ ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ² Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸.

Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ğ´Ğ¾ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ.

locals {
  cloudinit_path = "${path.module}/templates/init.yaml"
}

    ğŸ“Œ Ğ­Ñ‚Ğ¾ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ file() Ğ¸ templatefile(), Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿ÑƒÑ‚ÑŒ Ğ²ÑĞµĞ³Ğ´Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ» Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ Ğ¾Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°.

âœ‚ï¸ trimspace(string)

Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹ Ğ¸ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑÑ‹ ÑÑ‚Ñ€Ğ¾Ğº:

output "cleaned" {
  value = trimspace("\n   hello world   \n")
  # => "hello world"
}

âœ‚ï¸ chomp(string)

Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸ (\n):

output "chomped" {
  value = chomp("line\n")
  # => "line"
}
