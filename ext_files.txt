üìò –§—É–Ω–∫—Ü–∏—è file(path) üîπ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É.

üì¶ –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:

    –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ SSH-–∫–ª—é—á–∞:

    sshkeys = file("${path.module}/ssh/id_ed25519.pub")

    –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

    locals {
      nginx_conf = file("${path.module}/templates/nginx.conf")
    }

üìò –§—É–Ω–∫—Ü–∏—è templatefile(path, vars) üîπ –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ —à–∞–±–ª–æ–Ω —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

üì¶ –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

    –°–∫—Ä–∏–ø—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞

    –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π NGINX, systemd, Ansible –∏ –¥—Ä.

üìÑ –ü—Ä–∏–º–µ—Ä —à–∞–±–ª–æ–Ω–∞ nginx.conf.tpl:

server {
    listen 80;
    server_name ${domain};
    root /var/www/${site_dir};
}

üìÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Terraform:

locals {
  nginx_config = templatefile("${path.module}/templates/nginx.conf.tpl", {
    domain   = "example.com",
    site_dir = "html"
  })
}

########################################################


